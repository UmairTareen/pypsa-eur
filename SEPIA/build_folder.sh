#!/bin/bash

mkdir -p ../results/html_folder/other_countries
mkdir -p ../results/html_folder/other_countries/dispatch_plots/

cp -R ../results/ref/country_csvs ../results/html_folder/csvs_ref
cp -R ../results/suff/country_csvs ../results/html_folder/csvs_suff
cp ../results/suff/htmls/BE_emissions_suff.html ../results/html_folder/BE_emissions_suff.html
cp ../results/ref/htmls/BE_emissions_ref.html ../results/html_folder/BE_emissions_ref.html
cp ../results/suff/htmls/BE_fec_suff.html ../results/html_folder/BE_fec_suff.html
cp ../results/ref/htmls/BE_fec_ref.html ../results/html_folder/BE_fec_ref.html
cp ../results/suff/htmls/BE_sankeys_suff.html ../results/html_folder/BE_sankeys_suff.html
cp ../results/ref/htmls/BE_sankeys_ref.html ../results/html_folder/BE_sankeys_ref.html
cp ../results/suff/htmls/BE_capacities_suff.html ../results/html_folder/BE_capacities_suff.html
cp ../results/ref/htmls/BE_capacities_ref.html ../results/html_folder/BE_capacities_ref.html
cp ../results/suff/htmls/BE_costs_suff.html ../results/html_folder/BE_costs_suff.html
cp ../results/ref/htmls/BE_costs_ref.html ../results/html_folder/BE_costs_ref.html
cp ../results/suff/htmls/BE_demands_suff.html ../results/html_folder/BE_demands_suff.html
cp ../results/ref/htmls/BE_demands_ref.html ../results/html_folder/BE_demands_ref.html
cp ../results/suff/htmls/BE_dispatch_plots_suff.html ../results/html_folder/BE_dispatch_plots_suff.html
cp ../results/ref/htmls/BE_dispatch_plots_ref.html ../results/html_folder/BE_dispatch_plots_ref.html
cp ../results/suff/htmls/BE_maps_suff.html ../results/html_folder/BE_maps_suff.html
cp ../results/ref/htmls/BE_maps_ref.html ../results/html_folder/BE_maps_ref.html

cp ../results/suff/htmls/EU_emissions_suff.html ../results/html_folder/EU_emissions_suff.html
cp ../results/ref/htmls/EU_emissions_ref.html ../results/html_folder/EU_emissions_ref.html
cp ../results/suff/htmls/EU_fec_suff.html ../results/html_folder/EU_fec_suff.html
cp ../results/ref/htmls/EU_fec_ref.html ../results/html_folder/EU_fec_ref.html
cp ../results/suff/htmls/EU_sankeys_suff.html ../results/html_folder/EU_sankeys_suff.html
cp ../results/ref/htmls/EU_sankeys_ref.html ../results/html_folder/EU_sankeys_ref.html
cp ../results/suff/htmls/EU_capacities_suff.html ../results/html_folder/EU_capacities_suff.html
cp ../results/ref/htmls/EU_capacities_ref.html ../results/html_folder/EU_capacities_ref.html
cp ../results/suff/htmls/EU_costs_suff.html ../results/html_folder/EU_costs_suff.html
cp ../results/ref/htmls/EU_costs_ref.html ../results/html_folder/EU_costs_ref.html
cp ../results/suff/htmls/EU_demands_suff.html ../results/html_folder/EU_demands_suff.html
cp ../results/ref/htmls/EU_demands_ref.html ../results/html_folder/EU_demands_ref.html
cp ../results/suff/htmls/EU_dispatch_plots_suff.html ../results/html_folder/EU_dispatch_plots_suff.html
cp ../results/ref/htmls/EU_dispatch_plots_ref.html ../results/html_folder/EU_dispatch_plots_ref.html
cp ../results/suff/htmls/EU_maps_suff.html ../results/html_folder/EU_maps_suff.html
cp ../results/ref/htmls/EU_maps_ref.html ../results/html_folder/EU_maps_ref.html

cp ../results/suff/htmls/FR_emissions_suff.html ../results/html_folder/other_countries/FR_emissions_suff.html
cp ../results/ref/htmls/FR_emissions_ref.html ../results/html_folder/other_countries/FR_emissions_ref.html
cp ../results/suff/htmls/FR_fec_suff.html ../results/html_folder/other_countries/FR_fec_suff.html
cp ../results/ref/htmls/FR_fec_ref.html ../results/html_folder/other_countries/FR_fec_ref.html
cp ../results/suff/htmls/FR_sankeys_suff.html ../results/html_folder/other_countries/FR_sankeys_suff.html
cp ../results/ref/htmls/FR_sankeys_ref.html ../results/html_folder/other_countries/FR_sankeys_ref.html
cp ../results/suff/htmls/FR_capacities_suff.html ../results/html_folder/other_countries/FR_capacities_suff.html
cp ../results/ref/htmls/FR_capacities_ref.html ../results/html_folder/other_countries/FR_capacities_ref.html
cp ../results/suff/htmls/FR_costs_suff.html ../results/html_folder/other_countries/FR_costs_suff.html
cp ../results/ref/htmls/FR_costs_ref.html ../results/html_folder/other_countries/FR_costs_ref.html
cp ../results/suff/htmls/FR_demands_suff.html ../results/html_folder/other_countries/FR_demands_suff.html
cp ../results/ref/htmls/FR_demands_ref.html ../results/html_folder/other_countries/FR_demands_ref.html
cp ../results/suff/htmls/FR_dispatch_plots_suff.html ../results/html_folder/other_countries/FR_dispatch_plots_suff.html
cp ../results/ref/htmls/FR_dispatch_plots_ref.html ../results/html_folder/other_countries/FR_dispatch_plots_ref.html
cp ../results/suff/htmls/FR_maps_suff.html ../results/html_folder/other_countries/FR_maps_suff.html
cp ../results/ref/htmls/FR_maps_ref.html ../results/html_folder/other_countries/FR_maps_ref.html

cp ../results/suff/htmls/DE_emissions_suff.html ../results/html_folder/other_countries/DE_emissions_suff.html
cp ../results/ref/htmls/DE_emissions_ref.html ../results/html_folder/other_countries/DE_emissions_ref.html
cp ../results/suff/htmls/DE_fec_suff.html ../results/html_folder/other_countries/DE_fec_suff.html
cp ../results/ref/htmls/DE_fec_ref.html ../results/html_folder/other_countries/DE_fec_ref.html
cp ../results/suff/htmls/DE_sankeys_suff.html ../results/html_folder/other_countries/DE_sankeys_suff.html
cp ../results/ref/htmls/DE_sankeys_ref.html ../results/html_folder/other_countries/DE_sankeys_ref.html
cp ../results/suff/htmls/DE_capacities_suff.html ../results/html_folder/other_countries/DE_capacities_suff.html
cp ../results/ref/htmls/DE_capacities_ref.html ../results/html_folder/other_countries/DE_capacities_ref.html
cp ../results/suff/htmls/DE_costs_suff.html ../results/html_folder/other_countries/DE_costs_suff.html
cp ../results/ref/htmls/DE_costs_ref.html ../results/html_folder/other_countries/DE_costs_ref.html
cp ../results/suff/htmls/DE_demands_suff.html ../results/html_folder/other_countries/DE_demands_suff.html
cp ../results/ref/htmls/DE_demands_ref.html ../results/html_folder/other_countries/DE_demands_ref.html
cp ../results/suff/htmls/DE_dispatch_plots_suff.html ../results/html_folder/other_countries/DE_dispatch_plots_suff.html
cp ../results/ref/htmls/DE_dispatch_plots_ref.html ../results/html_folder/other_countries/DE_dispatch_plots_ref.html
cp ../results/suff/htmls/DE_maps_suff.html ../results/html_folder/other_countries/DE_maps_suff.html
cp ../results/ref/htmls/DE_maps_ref.html ../results/html_folder/other_countries/DE_maps_ref.html

cp ../results/suff/htmls/GB_emissions_suff.html ../results/html_folder/other_countries/GB_emissions_suff.html
cp ../results/ref/htmls/GB_emissions_ref.html ../results/html_folder/other_countries/GB_emissions_ref.html
cp ../results/suff/htmls/GB_fec_suff.html ../results/html_folder/other_countries/GB_fec_suff.html
cp ../results/ref/htmls/GB_fec_ref.html ../results/html_folder/other_countries/GB_fec_ref.html
cp ../results/suff/htmls/GB_sankeys_suff.html ../results/html_folder/other_countries/GB_sankeys_suff.html
cp ../results/ref/htmls/GB_sankeys_ref.html ../results/html_folder/other_countries/GB_sankeys_ref.html
cp ../results/suff/htmls/GB_capacities_suff.html ../results/html_folder/other_countries/GB_capacities_suff.html
cp ../results/ref/htmls/GB_capacities_ref.html ../results/html_folder/other_countries/GB_capacities_ref.html
cp ../results/suff/htmls/GB_costs_suff.html ../results/html_folder/other_countries/GB_costs_suff.html
cp ../results/ref/htmls/GB_costs_ref.html ../results/html_folder/other_countries/GB_costs_ref.html
cp ../results/suff/htmls/GB_demands_suff.html ../results/html_folder/other_countries/GB_demands_suff.html
cp ../results/ref/htmls/GB_demands_ref.html ../results/html_folder/other_countries/GB_demands_ref.html
cp ../results/suff/htmls/GB_dispatch_plots_suff.html ../results/html_folder/other_countries/GB_dispatch_plots_suff.html
cp ../results/ref/htmls/GB_dispatch_plots_ref_.html ../results/html_folder/other_countries/GB_dispatch_plots_ref.html
cp ../results/suff/htmls/GB_maps_suff.html ../results/html_folder/other_countries/GB_maps_suff.html
cp ../results/ref/htmls/GB_maps_ref.html ../results/html_folder/other_countries/GB_maps_ref.html

cp ../results/suff/htmls/NL_emissions_suff.html ../results/html_folder/other_countries/NL_emissions_suff.html
cp ../results/ref/htmls/NL_emissions_ref.html ../results/html_folder/other_countries/NL_emissions_ref.html
cp ../results/suff/htmls/NL_fec_suff.html ../results/html_folder/other_countries/NL_fec_suff.html
cp ../results/ref/htmls/NL_fec_ref.html ../results/html_folder/other_countries/NL_fec_ref.html
cp ../results/suff/htmls/NL_sankeys_suff.html ../results/html_folder/other_countries/NL_sankeys_suff.html
cp ../results/ref/htmls/NL_sankeys_ref.html ../results/html_folder/other_countries/NL_sankeys_ref.html
cp ../results/suff/htmls/NL_capacities_suff.html ../results/html_folder/other_countries/NL_capacities_suff.html
cp ../results/ref/htmls/NL_capacities_ref.html ../results/html_folder/other_countries/NL_capacities_ref.html
cp ../results/suff/htmls/NL_costs_suff.html ../results/html_folder/other_countries/NL_costs_suff.html
cp ../results/ref/htmls/NL_costs_ref_.html ../results/html_folder/other_countries/NL_costs_ref_.html
cp ../results/suff/htmls/NL_demands_suff.html ../results/html_folder/other_countries/NL_demands_suff.html
cp ../results/ref/htmls/NL_demands_ref.html ../results/html_folder/other_countries/NL_demands_ref.html
cp ../results/suff/htmls/NL_dispatch_plots_suff.html ../results/html_folder/other_countries/NL_dispatch_plots_suff.html
cp ../results/ref/htmls/NL_dispatch_plots_ref.html ../results/html_folder/other_countries/NL_dispatch_plots_ref.html
cp ../results/suff/htmls/NL_maps_suff.html ../results/html_folder/other_countries/NL_maps_suff.html
cp ../results/ref/htmls/NL_maps_ref.html ../results/html_folder/other_countries/NL_maps_ref.html


cp ../results/scenario_results/BE_combined_scenario_chart.html ../results/html_folder/BE_combined_scenario_chart.html
cp ../results/scenario_results/BE_scenario_comparison.html ../results/html_folder/BE_scenario_comparison.html
cp ../results/scenario_results/EU_combined_scenario_chart.html ../results/html_folder/EU_combined_scenario_chart.html

cp ../results/scenario_results/DE_combined_scenario_chart.html ../results/html_folder/other_countries/DE_combined_scenario_chart.html
cp ../results/scenario_results/NL_combined_scenario_chart.html ../results/html_folder/other_countries/NL_combined_scenario_chart.html
cp ../results/scenario_results/FR_combined_scenario_chart.html ../results/html_folder/other_countries/FR_combined_scenario_chart.html
cp ../results/scenario_results/GB_combined_scenario_chart.html ../results/html_folder/other_countries/GB_combined_scenario_chart.html

cp ../results/suff/htmls/raw_html/Power_Dispatch-BE_2050.html ../results/html_folder/other_countries/dispatch_plots/Power_Dispatch-BE_weekly_suff.html
cp ../results/suff/htmls/raw_html/Heat_Dispatch-BE_2050.html ../results/html_folder/other_countries/dispatch_plots/Heat_Dispatch-BE_weekly_suff.html

cp ../results/ref/htmls/raw_html/Power_Dispatch-BE_2050.html ../results/html_folder/other_countries/dispatch_plots/Power_Dispatch-BE_weekly_ref.html
cp ../results/ref/htmls/raw_html/Heat_Dispatch-BE_2050.html ../results/html_folder/other_countries/dispatch_plots/Heat_Dispatch-BE_weekly_ref.html


# Now synchronize with the FTP server.

# Configuration
FTP_HOST="boucan.domainepublic.net"
FTP_USER="negawattbe_syl"
FTP_PORT=21
LOCAL_FOLDER="../results/html_folder"
REMOTE_BASE="/www/prod.negawatt.be/scenario"

# Get current date in YYMMDD format
DATE_FOLDER=$(date '+%y%m%d')
REMOTE_FOLDER="$REMOTE_BASE/$DATE_FOLDER"

# Check if local folder exists
if [ ! -d "$LOCAL_FOLDER" ]; then
    echo "Error: Local folder '$LOCAL_FOLDER' not found"
    exit 1
fi

# Prompt for password
read -s -p "Enter FTP password: " FTP_PASS
echo

# Execute lftp with commands via heredoc
lftp -p $FTP_PORT -u "$FTP_USER,$FTP_PASS" "ftp://$FTP_HOST" << EOF
# Debug and connection settings
debug 3
set ssl:verify-certificate no
set ftp:ssl-force true
set ftp:ssl-protect-data true
set ssl:priority "NORMAL:+VERS-TLS1.2:+VERS-TLS1.1:+VERS-TLS1.0:-VERS-SSL3.0"
set ftp:ssl-allow true
set ftp:ssl-protect-list yes
set ftp:ssl-force-auth TLS
set net:timeout 15
set net:max-retries 2
set net:reconnect-interval-base 5

# Create remote directory (ignore error if exists)
mkdir -p "$REMOTE_FOLDER"

# Navigate to remote directory
cd "$REMOTE_FOLDER"

# Upload local folder contents recursively
mirror -R "$LOCAL_FOLDER" .

# Verify upload
echo "Verifying upload..."
ls -R

quit
EOF

# Check if lftp command was successful
if [ $? -eq 0 ]; then
    echo "Upload completed successfully to $REMOTE_FOLDER"
else
    echo "Error: Upload failed"
    exit 1
fi





